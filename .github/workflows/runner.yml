name: Network Bypass Runner
on:
  schedule:
    - cron: '0 */4 * * *' # اجرای خودکار هر ۴ ساعت برای پایداری ۲۴/۷ [۵۸۲]
  workflow_dispatch:      # امکان اجرای دستی در صورت قطع شدن [۵۸۳]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy Proxy Core
        run: |
          # دانلود و اجرای اسکریپت
          curl -Ls https://raw.githubusercontent.com/yonggekkk/argosbx/main/argosbx.sh -o argosbx.sh
          chmod +x argosbx.sh
          sudo -E ./argosbx.sh
          
          # --- حیاتی‌ترین بخش: زنده نگه داشتن رانر برای ۶ ساعت ---
          sleep infinity 
        env:
          vlpt: 2053                # استفاده از پورت مورد تایید کلودفلر [۶۷۰]
          argo: vwpt                # فعال‌سازی حتمی تونل آرگو برای عبور از فیلترینگ [۵۸۷، ۶۸۲]
          uuid: e69cc705-8d07-4131-8ec7-3b6e797207ff
          cf_token: ${{ secrets.CF_API_TOKEN }}
          cf_zone: ${{ secrets.CF_ZONE_ID }}
